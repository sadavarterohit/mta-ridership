[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "MTA ridership Analysis",
    "section": "",
    "text": "1 Introduction\nThe subway is one of the most iconic parts of New York City! It’s an iconic and historic mode of transportation that has made its way into every New Yorker’s life. So much so, that there are entire art movements dedicated to life in New York on the subway lines. A major chunk of critical commentary about the NYC subway is the delays and maintenance activities. The subway trains go into delays sometimes unexpectedly, usually due to something blocking the track, sometimes due to individuals activities on these subways etc.\nThese delays cause major problems to all those who use the subway on a regular basis, they need to find alternate modes of transport, and are delayed into getting on with their lives on quite a regular basis.\nThis study is aimed at finding the patterns in these delays, which may be cruicial for city policy makers, and residents alike, about the actual frequency and intensity of delays across different subway lines, through the course of a long period of time, along with the reasons for these delays.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "data.html",
    "href": "data.html",
    "title": "2  Data",
    "section": "",
    "text": "2.1 Description\nThere are four main datasets that we plan to use for this project. All of the data is collected by the Metropolitan Transportation Authority, and were imported by directly downloading the CSV files from the official website.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "data.html#description",
    "href": "data.html#description",
    "title": "2  Data",
    "section": "",
    "text": "2.1.1 MTA Subway Trains Delayed: Beginning 2020\nThis dataset (source) contains the number and percentage of subway trains delayed per weekday, broken down into specific delay categories (from 2020 onward). According to the source, the data on train arrivals is manually entered into a digital dispatching tool, and the number of trains delayed by more than five minutes or missing scheduled stops is summed up. Additionally, every delay is manually assigned a category and subcategory. Thus, the assignment of categories to delays depends on the subjective judgment of the dispatcher, and in some cases, the delays may be caused by more than one cause (which cannot be recorded in this format). The frequency of updates to this dataset varies widely, but it has been updated at least once every month. As of 11/19/2024, the dataset has 39051 rows and 7 columns.\nThe following columns are included in the data:\n\nmonth - The month in which the delays occur\ndivision - The subway line division, lettered or numbered\nline - The subway line\nday_type - Whether the day is a weekday (1) or a weekend (2)\nreporting_category - One of six categories causing the delays\nsubcategory - The subcategory of the delays\ndelays - The number of train delays for the category and time period\n\n\n\n2.1.2 MTA Service Alerts: Beginning April 2020\nThis dataset (source) contains details of service alerts causing route changes in the MTA from April 2020 onward. Note that this contains service changes of MTA buses as well, but for now we are interested in the MTA subway alone. Real-time service alerts are first drafted within the MTA alert system, and then disseminated via various channels in real time, while planned alerts are entered into the system ahead of time. The frequency of updates to this dataset varies, but it has been updated at least once every month on average. As of 11/19/2024, the dataset has 351631 rows and 9 columns.\nThe following columns are included in the data:\n\nAlert ID\nEvent ID\nUpdate Number\nDate\nAgency - Transit agency associated with the event (we are interested in the NYC subway)\nStatus Label - Pipe-delimited list of service statuses\nAffected - Pipe-delimited list of affected routes\nHeader - High-level overview of service impact\nDescription - Additional information related to the alert\n\n\n\n2.1.3 MTA Subway Wait Assessment: Beginning 2020\nThis dataset (source) measures how regularly trains are spaced on the MTA subway. Subway schedule data, including service changes, and actual train movement for each day are compiled into a pair of timetables, while the actual train movement and distance data come from a variety of sources. The dataset appears to have been updated at least once every month, and the data has 5306 rows and 8 columns as of 11/19/2024.\nThe following columns are included in the data:\n\nmonth\ndivision - The subway line division, lettered or numbered\nline - The subway line\nday_type - Whether the day is a weekday or a weekend\nperiod - Whether peak or off-peak service\nnum_timepoints_passing_wait_assessment - Number of scheduled timepoints where trips pass the wait assessment standard\nnum_sched_timepoints - Number of scheduled timepoints\nwait assessment - Percentage of trips that pass the wait assessment\n\n\n\n2.1.4 MTA Subway Hourly Ridership: Beginning July 2020\nThis dataset (source) subway ridership estimates on an hourly basis by subway station complex and class of fare payment, beginning July 2020. It captures rider entries made at subway turnstiles by using OMNY and MetroCard taps/swipes. MetroCard data is aggregated from on-premises MTA data servers, while OMNY data is provided by a third-party vendor named Cubic. This dataset appears to have multiple updates in October and November 2024. As of 12/9/2024, the dataset has about 105 million rows and 12 columns. Due to its large size (about 17 GB), we used Google Colab to aggregate and preprocess the data and reduce its size (described later).\nThe following columns are included in the (original) data:\n\ntransit_timestamp - Timestamp when the payment took place in local time, rounded down to the nearest hour\ntransit_mode\nstation_complex_id\nstation_complex\nborough\npayment_method\nfare_class_category\nridership\ntransfers\nlatitude\nlongitude\nGeoreference\n\n\n2.1.4.1 Preprocessing and aggregation\nAs mentioned earlier, the original dataset was very large and difficult to work with. We discovered that the original dataset had many columns that were not necessary for our analysis. Moreover, a major factor contributing to the size of the dataset was the fact that the ridership data was collected and stored on an hourly basis, rather than monthly. Thus, to reduce the size of the data, we performed the following steps in Google Colab (code can be viewed in the file /preprocessing-code/MTA_Preprocessing.ipynb on GitHub):\n\nFilter the data by the condition transit_mode == 'subway'\nExtract the year and month of the transit_timestamp and store them in new columns year and month\nCheck if the transit_timestamp represents a weekend or a weekday, and store the information in a new column day_type, in the same format as in the ‘MTA Subway Trains Delayed’ dataset\nRemove all columns except year, month, day_type, station_complex, and ridership\nGroup by all the columns except ridership and take the sum of ridership for every group\n\nThis effectively computes the overall monthly stationwise ridership for weekdays and weekends respectively, and reduces the size of the dataset to about 2000 KB. The new data set has 44095 rows and 5 columns.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "data.html#missing-value-analysis",
    "href": "data.html#missing-value-analysis",
    "title": "2  Data",
    "section": "2.2 Missing value analysis",
    "text": "2.2 Missing value analysis\n\n2.2.1 MTA Subway Trains Delayed: Beginning 2020\n\n\nCode\nsubway_train_delays &lt;- read_csv(\"data/MTA_Subway_Trains_Delayed__Beginning_2020_20241118.csv\")\nplot_missing(subway_train_delays, num_char = 8)\n\n\n\n\n\n\n\n\n\nHere, the subcategory field is missing in less than 12.5% of the rows, while all the other values are present in all rows.\n\n\n2.2.2 MTA Service Alerts: Beginning April 2020\n\n\nCode\nmta_service_alerts &lt;- read_csv(\"data/MTA_Service_Alerts__Beginning_April_2020_20241118.csv\")\nplot_missing(mta_service_alerts, num_char = 7, max_cols = 4)\n\n\n\n\n\n\n\n\n\nHere, in about 62.5% of the rows only the Description field is missing, while there are a few rows where the Affected and the Header fields are missing as well.\n\n\n2.2.3 MTA Subway Wait Assessment: Beginning 2020\n\n\nCode\nsubway_wait_assessment &lt;- read_csv(\"data/MTA_Subway_Wait_Assessment__Beginning_2020_20241119.csv\")\nplot_missing(subway_wait_assessment, num_char = 7)\n\n\n\n\n\n\n\n\n\nThis dataset has no missing values.\n\n\n2.2.4 MTA Subway Hourly Ridership: Beginning July 2020\nSince the original dataset is very large, we did missing value analysis on our modified dataset. (Note: the first column represents a row index which is not relevant for our analysis)\n\n\nCode\nmta_ridership &lt;- read_csv(\"data/MTA_Subway_Hourly_Ridership_Data_Modified_v2.csv\")\nplot_missing(mta_ridership)\n\n\n\n\n\n\n\n\n\nThis dataset has no missing values.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "results.html",
    "href": "results.html",
    "title": "3  Results",
    "section": "",
    "text": "Code\nmta_service_alerts_filtered &lt;- \n  mta_service_alerts |&gt; \n  filter(Agency == \"NYCT Subway\") |&gt; \n  mutate(Date = as.Date(as.POSIXlt(Date, format=\"%m/%d/%Y %I:%M:%S %p\", tz=\"America/New_York\")))\n\n\n\n\nCode\n# Remove the first column from the ridership dataset\nmta_ridership_new &lt;- \n  mta_ridership |&gt;\n  select(station_complex, year, month, day_type, ridership)\n\n\n\n\nCode\n# Define a mapping of subway lines to their respective groups\nsubway_groups &lt;- data.frame(\n  line = c(\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"A\", \"C\", \"E\", \"B\", \"D\", \"F\", \"M\", \"G\", \"J\", \"Z\", \"JZ\", \"L\", \"N\", \"Q\", \"R\", \"W\", \"S 42nd\", \"S Fkln\", \"S Rock\"),\n  group = c(\n    \"IRT - Broadway–Seventh Avenue Line\",  # 1, 2, 3\n    \"IRT - Broadway–Seventh Avenue Line\", \n    \"IRT - Broadway–Seventh Avenue Line\", \n    \"IRT - Lexington Avenue Line\",         # 4, 5, 6\n    \"IRT - Lexington Avenue Line\", \n    \"IRT - Lexington Avenue Line\", \n    \"IRT - Flushing Line\",                 # 7\n    \"IND - Eighth Avenue Line\",            # A, C, E\n    \"IND - Eighth Avenue Line\", \n    \"IND - Eighth Avenue Line\", \n    \"IND - Sixth Avenue Line\",             # B, D, F, M\n    \"IND - Sixth Avenue Line\", \n    \"IND - Sixth Avenue Line\", \n    \"IND - Sixth Avenue Line\", \n    \"IND - Crosstown Line\",                # G\n    \"BMT - Nassau Street Line\",            # J, Z\n    \"BMT - Nassau Street Line\", \n    \"BMT - Nassau Street Line\",\n    \"BMT - Canarsie Line\",                 # L\n    \"BMT - Broadway Line\",                 # N, Q, R, W\n    \"BMT - Broadway Line\", \n    \"BMT - Broadway Line\", \n    \"BMT - Broadway Line\",\n    \"Shuttles\",                            # All S lines\n    \"Shuttles\",\n    \"Shuttles\"\n  )\n)\n\n\n\n\nCode\nsubway_wait_assessment_with_groups &lt;- subway_wait_assessment |&gt;\n  left_join(subway_groups, by = \"line\")\n\n\n\n\nCode\n# Define custom colors for the subway groups (based on NYC Subway colors)\nsubway_group_colors &lt;- c(\n  \"IRT - Broadway–Seventh Avenue Line\" = \"#EE352E\",# Red\n  \"IRT - Lexington Avenue Line\" = \"#00933C\",       # Green\n  \"IRT - Flushing Line\" = \"#B933AD\",               # Purple\n  \"IND - Eighth Avenue Line\" = \"#0039A6\",          # Blue\n  \"IND - Sixth Avenue Line\" = \"#FF6319\",           # Orange\n  \"IND - Crosstown Line\" = \"#6CBE45\",              # Light Green\n  \"BMT - Nassau Street Line\" = \"#996633\",          # Brown\n  \"BMT - Canarsie Line\" = \"#A7A9AC\",               # Gray\n  \"BMT - Broadway Line\" = \"#FCCC0A\",               # Yellow\n  \"Shuttles\" = \"#808183\"                           # Dark Slate Gray\n)\n\n\n\n\nCode\n# Define custom legend labels, showing group name and corresponding lines\ncustom_legend_labels &lt;- c(\n  \"IRT - Broadway–Seventh Avenue Line\" = \"1, 2, 3\",\n  \"IRT - Lexington Avenue Line\" = \"4, 5, 6\",\n  \"IRT - Flushing Line\" = \"Flushing (7)\",\n  \"IND - Eighth Avenue Line\" = \"A, C, E\",\n  \"IND - Sixth Avenue Line\" = \"B, D, F, M\",\n  \"IND - Crosstown Line\" = \"Crosstown (G)\",\n  \"BMT - Nassau Street Line\" = \"J, Z\",\n  \"BMT - Canarsie Line\" = \"L\",\n  \"BMT - Broadway Line\" = \"N, Q, R, W\",\n  \"Shuttles\" = \"S lines\"\n)\n\n\n\n\nCode\n# Recompute the timepoint counts over each group\nwait_assessment_groupwise &lt;- subway_wait_assessment_with_groups |&gt;\n  group_by(group, month) |&gt;\n  summarize(tp_passed = sum(num_timepoints_passing_wait_assessment, na.rm = TRUE),\n            tp_sched = sum(num_sched_timepoints, na.rm = TRUE),\n            .groups = \"drop\") |&gt;\n  mutate(`wait assessment` = (1 - tp_passed/tp_sched)*100) |&gt;\n  ungroup() |&gt;\n  drop_na(group)\n\n\n\n\nCode\nggplot(wait_assessment_groupwise, aes(x = month, y = `wait assessment`, color = group, group = group)) +\n  geom_line(size = 1) +\n  scale_x_date(limits = c(as.Date(\"2020-01-01\"), as.Date(\"2024-10-01\")), \n               date_breaks = \"2 months\", date_labels = \"%b %Y\") + \n  scale_color_manual(values = subway_group_colors, labels = custom_legend_labels) +\n  labs(\n    title = \"Monthly Wait Assessment by Subway Group\",\n    x = \"Month\",\n    y = \"% timepoints with delays\",\n    color = \"Subway Group (Lines)\"\n  ) +\n  theme(\n    text = element_text(size = 14),\n    legend.position = \"right\",\n    legend.title = element_text(face = \"bold\"),\n    axis.text.x = element_text(angle = 45, hjust = 1)\n  )\n\n\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\nℹ Please use `linewidth` instead.\n\n\n\n\n\n\n\n\n\n\n\nCode\n# Filter to include data after July 2020 only\nsubway_train_delays_filtered &lt;- \n  subway_train_delays |&gt; \n  filter(month &gt;= '2020-07-01')\nmta_service_alerts_filtered_v2 &lt;- \n  mta_service_alerts_filtered |&gt; \n  filter(Date &gt;= '2020-07-01')\nsubway_wait_assessment_filtered &lt;-\n  subway_wait_assessment |&gt;\n  filter(month &gt;= '2020-07-01')\n\n\n\n\nCode\nmonthly_delays &lt;- subway_train_delays_filtered |&gt; \n  group_by(month, day_type) |&gt;\n  summarize(delays = sum(delays)) |&gt;\n  ungroup()\n\n\n`summarise()` has grouped output by 'month'. You can override using the\n`.groups` argument.\n\n\n\n\nCode\nmonthly_wait_assessment &lt;- subway_wait_assessment_filtered |&gt;\n  group_by(month, day_type) |&gt;\n  summarize(tp_passed = sum(num_timepoints_passing_wait_assessment, na.rm = TRUE),\n            tp_sched = sum(num_sched_timepoints, na.rm = TRUE)) |&gt;\n  mutate(`wait assessment` = tp_passed/tp_sched) |&gt;\n  ungroup()\n\n\n`summarise()` has grouped output by 'month'. You can override using the\n`.groups` argument.\n\n\n\n\nCode\nmonthly_service_alerts &lt;- mta_service_alerts_filtered_v2 |&gt; \n  mutate(month = make_date(year(Date), month(Date), 1), \n         day_type = ifelse(wday(Date) %in% c(1, 7), 2, 1)) |&gt;\n  group_by(month, day_type) |&gt;\n  summarize(alert_count = n()) |&gt;\n  ungroup()\n\n\n`summarise()` has grouped output by 'month'. You can override using the\n`.groups` argument.\n\n\n\n\nCode\nmonthly_mta_ridership &lt;- mta_ridership_new |&gt;\n  mutate(month = make_date(year, month, 1)) |&gt;\n  group_by(month, day_type) |&gt;\n  summarize(ridership = sum(ridership)) |&gt;\n  ungroup()\n\n\n`summarise()` has grouped output by 'month'. You can override using the\n`.groups` argument.\n\n\n\n\nCode\ndf_list &lt;- list(monthly_delays, monthly_service_alerts, monthly_wait_assessment, monthly_mta_ridership)\njoined_df &lt;- df_list |&gt; \n  reduce(full_join, by=c('month', 'day_type'))\n\n\n\n\nCode\njoined_df |&gt;\n  filter(day_type == 1) |&gt;\n  mutate(index_delays = round(100*delays/delays[1], 2),\n         index_alert_count = round(100*alert_count/alert_count[1], 2),\n         index_wait_assmt = round(100*`wait assessment`/`wait assessment`[1], 2),\n         index_ridership = round(100*ridership/ridership[1], 2)) |&gt;\n  select(month, index_delays, index_alert_count, index_wait_assmt, index_ridership) |&gt;\n  pivot_longer(!month, names_to = \"parameter\", values_to = \"index\") |&gt;\n  \n  ggplot(aes(x = month, y = index, color = parameter)) +\n  geom_line(size = 1, aes(group = parameter)) +\n  scale_x_date(limits = c(as.Date(\"2020-07-01\"), as.Date(\"2024-10-01\")), \n               date_breaks = \"2 months\", date_labels = \"%b %Y\") +\n  scale_color_brewer(palette = \"Set1\") +\n  labs(title = \"MTA monthly parameter variation on weekdays\", color = \"Parameter\") +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n\n\n\n\n\n\n\n\n\n\n\nCode\njoined_df |&gt;\n  filter(day_type == 2) |&gt;\n  mutate(index_delays = round(100*delays/delays[1], 2),\n         index_alert_count = round(100*alert_count/alert_count[1], 2),\n         index_wait_assmt = round(100*`wait assessment`/`wait assessment`[1], 2),\n         index_ridership = round(100*ridership/ridership[1], 2)) |&gt;\n  select(month, index_delays, index_alert_count, index_wait_assmt, index_ridership) |&gt;\n  pivot_longer(!month, names_to = \"parameter\", values_to = \"index\") |&gt;\n  \n  ggplot(aes(x = month, y = index, color = parameter)) +\n  scale_x_date(limits = c(as.Date(\"2020-07-01\"), as.Date(\"2024-10-01\")), \n               date_breaks = \"2 months\", date_labels = \"%b %Y\") +\n  geom_line(size = 1, aes(group = parameter)) +\n  scale_color_brewer(palette = \"Set1\") +\n  labs(title = \"MTA monthly parameter variation on weekends\", color = \"Parameter\") +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n\n\n\n\n\n\n\n\n\nFactor out the pandemic effect:\n\n\nCode\njoined_df_post_pandemic &lt;- joined_df |&gt;\n  filter(month &gt;= \"2022-07-01\")\n\n\n\n\nCode\njoined_df_post_pandemic |&gt;\n  filter(day_type == 1) |&gt;\n  mutate(index_delays = round(100*delays/delays[1], 2),\n         index_alert_count = round(100*alert_count/alert_count[1], 2),\n         index_wait_assmt = round(100*`wait assessment`/`wait assessment`[1], 2),\n         index_ridership = round(100*ridership/ridership[1], 2)) |&gt;\n  select(month, index_delays, index_alert_count, index_wait_assmt, index_ridership) |&gt;\n  pivot_longer(!month, names_to = \"parameter\", values_to = \"index\") |&gt;\n  \n  ggplot(aes(x = month, y = index, color = parameter)) +\n  geom_line(size = 1, aes(group = parameter)) +\n  scale_x_date(limits = c(as.Date(\"2022-07-01\"), as.Date(\"2024-10-01\")), \n               date_breaks = \"2 months\", date_labels = \"%b %Y\") +\n  scale_color_brewer(palette = \"Set1\") +\n  labs(title = \"MTA monthly parameter variation on weekdays (post pandemic)\", color = \"Parameter\") +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n\n\n\n\n\n\n\n\n\nScatterplots:\n\n\nCode\njoined_data_modified &lt;- joined_df |&gt;\n  mutate(period = factor(ifelse(month &gt;= \"2022-07-01\", \"Post-Pandemic\", \"Pandemic\")))\n\n\n\n\nCode\njoined_data_modified |&gt;\n  filter(day_type == 1) |&gt;\n  ggplot(aes(x = delays/10000, y = ridership/1000000, color = period)) +\n  geom_point() +\n  labs(\n    x = \"Monthly Delays (in ten thousands)\",\n    y = \"Monthly Ridership (in millions)\",\n    color = \"Period\",\n    title = \"Ridership vs Delays - Weekdays Only\"\n  )\n\n\n\n\n\n\n\n\n\n\n\nCode\njoined_data_modified |&gt;\n  filter(day_type == 2) |&gt;\n  ggplot(aes(x = delays/10000, y = ridership/1000000, color = period)) +\n  geom_point() +\n  labs(\n    x = \"Monthly Delays (in ten thousands)\",\n    y = \"Monthly Ridership (in millions)\",\n    color = \"Period\",\n    title = \"Ridership vs Delays - Weekends Only\"\n  )\n\n\n\n\n\n\n\n\n\n\n\nCode\nanalysis_month &lt;- as.Date(\"2023-01-01\")\n\n# Choose a number of stations with maximum ridership for plotting\nstations_2 &lt;- unique(top_n(mta_ridership_new, 1000, ridership)$station_complex)\n\nscale_val &lt;- 100000\n\nmta_ridership_new |&gt;\n  mutate(month = make_date(year, month, 1)) |&gt;\n  filter(month == analysis_month) |&gt;\n  mutate(day_type = fct_recode(factor(day_type), Weekday = \"1\", Weekend = \"2\")) |&gt;\n  mutate(ridership = ifelse(day_type == \"Weekday\", ridership/(5*scale_val), ridership/(2*scale_val))) |&gt;\n  filter(station_complex %in% stations_2) |&gt;\n  ggplot(aes(x = ridership, y = fct_reorder2(factor(station_complex), day_type == \"Weekday\", ridership, .desc = FALSE), color = day_type)) +\n  geom_point() +\n  labs(\n    x = \"Normalized Ridership (in hundred thousands)\",\n    y = \"\",\n    color = \"Day Type\",\n    title = paste(\"Ridership in\", analysis_month |&gt; format(format=\"%b %Y\"))\n  )\n\n\n\n\n\n\n\n\n\nCode\n  theme_linedraw(base_size = 7)\n\n\nList of 136\n $ line                            :List of 6\n  ..$ colour       : chr \"black\"\n  ..$ linewidth    : num 0.318\n  ..$ linetype     : num 1\n  ..$ lineend      : chr \"butt\"\n  ..$ arrow        : logi FALSE\n  ..$ inherit.blank: logi TRUE\n  ..- attr(*, \"class\")= chr [1:2] \"element_line\" \"element\"\n $ rect                            :List of 5\n  ..$ fill         : chr \"white\"\n  ..$ colour       : chr \"black\"\n  ..$ linewidth    : num 0.318\n  ..$ linetype     : num 1\n  ..$ inherit.blank: logi TRUE\n  ..- attr(*, \"class\")= chr [1:2] \"element_rect\" \"element\"\n $ text                            :List of 11\n  ..$ family       : chr \"\"\n  ..$ face         : chr \"plain\"\n  ..$ colour       : chr \"black\"\n  ..$ size         : num 7\n  ..$ hjust        : num 0.5\n  ..$ vjust        : num 0.5\n  ..$ angle        : num 0\n  ..$ lineheight   : num 0.9\n  ..$ margin       : 'margin' num [1:4] 0points 0points 0points 0points\n  .. ..- attr(*, \"unit\")= int 8\n  ..$ debug        : logi FALSE\n  ..$ inherit.blank: logi TRUE\n  ..- attr(*, \"class\")= chr [1:2] \"element_text\" \"element\"\n $ title                           : NULL\n $ aspect.ratio                    : NULL\n $ axis.title                      : NULL\n $ axis.title.x                    :List of 11\n  ..$ family       : NULL\n  ..$ face         : NULL\n  ..$ colour       : NULL\n  ..$ size         : NULL\n  ..$ hjust        : NULL\n  ..$ vjust        : num 1\n  ..$ angle        : NULL\n  ..$ lineheight   : NULL\n  ..$ margin       : 'margin' num [1:4] 1.75points 0points 0points 0points\n  .. ..- attr(*, \"unit\")= int 8\n  ..$ debug        : NULL\n  ..$ inherit.blank: logi TRUE\n  ..- attr(*, \"class\")= chr [1:2] \"element_text\" \"element\"\n $ axis.title.x.top                :List of 11\n  ..$ family       : NULL\n  ..$ face         : NULL\n  ..$ colour       : NULL\n  ..$ size         : NULL\n  ..$ hjust        : NULL\n  ..$ vjust        : num 0\n  ..$ angle        : NULL\n  ..$ lineheight   : NULL\n  ..$ margin       : 'margin' num [1:4] 0points 0points 1.75points 0points\n  .. ..- attr(*, \"unit\")= int 8\n  ..$ debug        : NULL\n  ..$ inherit.blank: logi TRUE\n  ..- attr(*, \"class\")= chr [1:2] \"element_text\" \"element\"\n $ axis.title.x.bottom             : NULL\n $ axis.title.y                    :List of 11\n  ..$ family       : NULL\n  ..$ face         : NULL\n  ..$ colour       : NULL\n  ..$ size         : NULL\n  ..$ hjust        : NULL\n  ..$ vjust        : num 1\n  ..$ angle        : num 90\n  ..$ lineheight   : NULL\n  ..$ margin       : 'margin' num [1:4] 0points 1.75points 0points 0points\n  .. ..- attr(*, \"unit\")= int 8\n  ..$ debug        : NULL\n  ..$ inherit.blank: logi TRUE\n  ..- attr(*, \"class\")= chr [1:2] \"element_text\" \"element\"\n $ axis.title.y.left               : NULL\n $ axis.title.y.right              :List of 11\n  ..$ family       : NULL\n  ..$ face         : NULL\n  ..$ colour       : NULL\n  ..$ size         : NULL\n  ..$ hjust        : NULL\n  ..$ vjust        : num 1\n  ..$ angle        : num -90\n  ..$ lineheight   : NULL\n  ..$ margin       : 'margin' num [1:4] 0points 0points 0points 1.75points\n  .. ..- attr(*, \"unit\")= int 8\n  ..$ debug        : NULL\n  ..$ inherit.blank: logi TRUE\n  ..- attr(*, \"class\")= chr [1:2] \"element_text\" \"element\"\n $ axis.text                       :List of 11\n  ..$ family       : NULL\n  ..$ face         : NULL\n  ..$ colour       : chr \"black\"\n  ..$ size         : 'rel' num 0.8\n  ..$ hjust        : NULL\n  ..$ vjust        : NULL\n  ..$ angle        : NULL\n  ..$ lineheight   : NULL\n  ..$ margin       : NULL\n  ..$ debug        : NULL\n  ..$ inherit.blank: logi TRUE\n  ..- attr(*, \"class\")= chr [1:2] \"element_text\" \"element\"\n $ axis.text.x                     :List of 11\n  ..$ family       : NULL\n  ..$ face         : NULL\n  ..$ colour       : NULL\n  ..$ size         : NULL\n  ..$ hjust        : NULL\n  ..$ vjust        : num 1\n  ..$ angle        : NULL\n  ..$ lineheight   : NULL\n  ..$ margin       : 'margin' num [1:4] 1.4points 0points 0points 0points\n  .. ..- attr(*, \"unit\")= int 8\n  ..$ debug        : NULL\n  ..$ inherit.blank: logi TRUE\n  ..- attr(*, \"class\")= chr [1:2] \"element_text\" \"element\"\n $ axis.text.x.top                 :List of 11\n  ..$ family       : NULL\n  ..$ face         : NULL\n  ..$ colour       : NULL\n  ..$ size         : NULL\n  ..$ hjust        : NULL\n  ..$ vjust        : num 0\n  ..$ angle        : NULL\n  ..$ lineheight   : NULL\n  ..$ margin       : 'margin' num [1:4] 0points 0points 1.4points 0points\n  .. ..- attr(*, \"unit\")= int 8\n  ..$ debug        : NULL\n  ..$ inherit.blank: logi TRUE\n  ..- attr(*, \"class\")= chr [1:2] \"element_text\" \"element\"\n $ axis.text.x.bottom              : NULL\n $ axis.text.y                     :List of 11\n  ..$ family       : NULL\n  ..$ face         : NULL\n  ..$ colour       : NULL\n  ..$ size         : NULL\n  ..$ hjust        : num 1\n  ..$ vjust        : NULL\n  ..$ angle        : NULL\n  ..$ lineheight   : NULL\n  ..$ margin       : 'margin' num [1:4] 0points 1.4points 0points 0points\n  .. ..- attr(*, \"unit\")= int 8\n  ..$ debug        : NULL\n  ..$ inherit.blank: logi TRUE\n  ..- attr(*, \"class\")= chr [1:2] \"element_text\" \"element\"\n $ axis.text.y.left                : NULL\n $ axis.text.y.right               :List of 11\n  ..$ family       : NULL\n  ..$ face         : NULL\n  ..$ colour       : NULL\n  ..$ size         : NULL\n  ..$ hjust        : num 0\n  ..$ vjust        : NULL\n  ..$ angle        : NULL\n  ..$ lineheight   : NULL\n  ..$ margin       : 'margin' num [1:4] 0points 0points 0points 1.4points\n  .. ..- attr(*, \"unit\")= int 8\n  ..$ debug        : NULL\n  ..$ inherit.blank: logi TRUE\n  ..- attr(*, \"class\")= chr [1:2] \"element_text\" \"element\"\n $ axis.text.theta                 : NULL\n $ axis.text.r                     :List of 11\n  ..$ family       : NULL\n  ..$ face         : NULL\n  ..$ colour       : NULL\n  ..$ size         : NULL\n  ..$ hjust        : num 0.5\n  ..$ vjust        : NULL\n  ..$ angle        : NULL\n  ..$ lineheight   : NULL\n  ..$ margin       : 'margin' num [1:4] 0points 1.4points 0points 1.4points\n  .. ..- attr(*, \"unit\")= int 8\n  ..$ debug        : NULL\n  ..$ inherit.blank: logi TRUE\n  ..- attr(*, \"class\")= chr [1:2] \"element_text\" \"element\"\n $ axis.ticks                      :List of 6\n  ..$ colour       : chr \"black\"\n  ..$ linewidth    : 'rel' num 0.5\n  ..$ linetype     : NULL\n  ..$ lineend      : NULL\n  ..$ arrow        : logi FALSE\n  ..$ inherit.blank: logi TRUE\n  ..- attr(*, \"class\")= chr [1:2] \"element_line\" \"element\"\n $ axis.ticks.x                    : NULL\n $ axis.ticks.x.top                : NULL\n $ axis.ticks.x.bottom             : NULL\n $ axis.ticks.y                    : NULL\n $ axis.ticks.y.left               : NULL\n $ axis.ticks.y.right              : NULL\n $ axis.ticks.theta                : NULL\n $ axis.ticks.r                    : NULL\n $ axis.minor.ticks.x.top          : NULL\n $ axis.minor.ticks.x.bottom       : NULL\n $ axis.minor.ticks.y.left         : NULL\n $ axis.minor.ticks.y.right        : NULL\n $ axis.minor.ticks.theta          : NULL\n $ axis.minor.ticks.r              : NULL\n $ axis.ticks.length               : 'simpleUnit' num 1.75points\n  ..- attr(*, \"unit\")= int 8\n $ axis.ticks.length.x             : NULL\n $ axis.ticks.length.x.top         : NULL\n $ axis.ticks.length.x.bottom      : NULL\n $ axis.ticks.length.y             : NULL\n $ axis.ticks.length.y.left        : NULL\n $ axis.ticks.length.y.right       : NULL\n $ axis.ticks.length.theta         : NULL\n $ axis.ticks.length.r             : NULL\n $ axis.minor.ticks.length         : 'rel' num 0.75\n $ axis.minor.ticks.length.x       : NULL\n $ axis.minor.ticks.length.x.top   : NULL\n $ axis.minor.ticks.length.x.bottom: NULL\n $ axis.minor.ticks.length.y       : NULL\n $ axis.minor.ticks.length.y.left  : NULL\n $ axis.minor.ticks.length.y.right : NULL\n $ axis.minor.ticks.length.theta   : NULL\n $ axis.minor.ticks.length.r       : NULL\n $ axis.line                       : list()\n  ..- attr(*, \"class\")= chr [1:2] \"element_blank\" \"element\"\n $ axis.line.x                     : NULL\n $ axis.line.x.top                 : NULL\n $ axis.line.x.bottom              : NULL\n $ axis.line.y                     : NULL\n $ axis.line.y.left                : NULL\n $ axis.line.y.right               : NULL\n $ axis.line.theta                 : NULL\n $ axis.line.r                     : NULL\n $ legend.background               :List of 5\n  ..$ fill         : NULL\n  ..$ colour       : logi NA\n  ..$ linewidth    : NULL\n  ..$ linetype     : NULL\n  ..$ inherit.blank: logi TRUE\n  ..- attr(*, \"class\")= chr [1:2] \"element_rect\" \"element\"\n $ legend.margin                   : 'margin' num [1:4] 3.5points 3.5points 3.5points 3.5points\n  ..- attr(*, \"unit\")= int 8\n $ legend.spacing                  : 'simpleUnit' num 7points\n  ..- attr(*, \"unit\")= int 8\n $ legend.spacing.x                : NULL\n $ legend.spacing.y                : NULL\n $ legend.key                      : NULL\n $ legend.key.size                 : 'simpleUnit' num 1.2lines\n  ..- attr(*, \"unit\")= int 3\n $ legend.key.height               : NULL\n $ legend.key.width                : NULL\n $ legend.key.spacing              : 'simpleUnit' num 3.5points\n  ..- attr(*, \"unit\")= int 8\n $ legend.key.spacing.x            : NULL\n $ legend.key.spacing.y            : NULL\n $ legend.frame                    : NULL\n $ legend.ticks                    : NULL\n $ legend.ticks.length             : 'rel' num 0.2\n $ legend.axis.line                : NULL\n $ legend.text                     :List of 11\n  ..$ family       : NULL\n  ..$ face         : NULL\n  ..$ colour       : NULL\n  ..$ size         : 'rel' num 0.8\n  ..$ hjust        : NULL\n  ..$ vjust        : NULL\n  ..$ angle        : NULL\n  ..$ lineheight   : NULL\n  ..$ margin       : NULL\n  ..$ debug        : NULL\n  ..$ inherit.blank: logi TRUE\n  ..- attr(*, \"class\")= chr [1:2] \"element_text\" \"element\"\n $ legend.text.position            : NULL\n $ legend.title                    :List of 11\n  ..$ family       : NULL\n  ..$ face         : NULL\n  ..$ colour       : NULL\n  ..$ size         : NULL\n  ..$ hjust        : num 0\n  ..$ vjust        : NULL\n  ..$ angle        : NULL\n  ..$ lineheight   : NULL\n  ..$ margin       : NULL\n  ..$ debug        : NULL\n  ..$ inherit.blank: logi TRUE\n  ..- attr(*, \"class\")= chr [1:2] \"element_text\" \"element\"\n $ legend.title.position           : NULL\n $ legend.position                 : chr \"right\"\n $ legend.position.inside          : NULL\n $ legend.direction                : NULL\n $ legend.byrow                    : NULL\n $ legend.justification            : chr \"center\"\n $ legend.justification.top        : NULL\n $ legend.justification.bottom     : NULL\n $ legend.justification.left       : NULL\n $ legend.justification.right      : NULL\n $ legend.justification.inside     : NULL\n $ legend.location                 : NULL\n $ legend.box                      : NULL\n $ legend.box.just                 : NULL\n $ legend.box.margin               : 'margin' num [1:4] 0cm 0cm 0cm 0cm\n  ..- attr(*, \"unit\")= int 1\n $ legend.box.background           : list()\n  ..- attr(*, \"class\")= chr [1:2] \"element_blank\" \"element\"\n $ legend.box.spacing              : 'simpleUnit' num 7points\n  ..- attr(*, \"unit\")= int 8\n  [list output truncated]\n - attr(*, \"class\")= chr [1:2] \"theme\" \"gg\"\n - attr(*, \"complete\")= logi TRUE\n - attr(*, \"validate\")= logi TRUE\n\n\n\n\nCode\n# Choose a number of stations with maximum ridership for plotting\nstations &lt;- unique(top_n(mta_ridership_new, 150, ridership)$station_complex)\n\nmta_stationwise_ridership_wd &lt;- mta_ridership_new |&gt;\n  mutate(month = make_date(year, month, 1)) |&gt;\n  filter(day_type == 1, station_complex %in% stations)\n\nscale_val_2 &lt;- 1000000\nmta_stationwise_ridership_wd |&gt;\n  ggplot(aes(x = month, y = ridership/scale_val_2, color = station_complex)) +\n  geom_line(size = 1) +\n  scale_x_date(limits = c(as.Date(\"2020-07-01\"), as.Date(\"2024-10-01\")), \n               date_breaks = \"2 months\", date_labels = \"%b %Y\") + \n  scale_color_brewer(palette = \"Set2\") +\n  labs(\n    x = \"Month\",\n    y = \"Ridership (in millions)\",\n    color = \"Station\"\n  ) +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n\n\n\n\n\n\n\n\n\n\n\nCode\nmta_stationwise_ridership_we &lt;- mta_ridership_new |&gt;\n  mutate(month = make_date(year, month, 1)) |&gt;\n  filter(day_type == 2, station_complex %in% stations)\n\nmta_stationwise_ridership_we |&gt;\n  ggplot(aes(x = month, y = ridership/scale_val_2, color = station_complex)) +\n  geom_line(size = 1) +\n  scale_x_date(limits = c(as.Date(\"2020-07-01\"), as.Date(\"2024-10-01\")), \n               date_breaks = \"2 months\", date_labels = \"%b %Y\") + \n  scale_color_brewer(palette = \"Set2\") +\n  labs(\n    x = \"Month\",\n    y = \"Ridership (in millions)\",\n    color = \"Station\"\n  ) +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n\n\n\n\n\n\n\n\n\n\n\nCode\n# Save files for interactivity\n# write_csv(mta_stationwise_ridership_wd, \"data/MTA_Stationwise_Monthly_Ridership_Weekday.csv\")\n# write_csv(mta_stationwise_ridership_we, \"data/MTA_Stationwise_Monthly_Ridership_Weekend.csv\")",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "d3graph.html",
    "href": "d3graph.html",
    "title": "4  Interactive graph",
    "section": "",
    "text": "This graph shows the monthly ridership of the 6 most frequently used subway stations by weekday and weekend, dynamically updating by month. This is another way to visualize the last line graph of the previous section. It is apparent that the relative lengths of the bars remain almost unchanged during different months, which correspond to the trends observed in the line graph (ridership appears to increase and decrease uniformly across the entire subway system). Also, notice that there is an overall increase in the bar lengths from 2020 to 2024, which corresponds to the steady increase in ridership visible in the line graph (ridership was lower than usual during the time of the pandemic, and then steadily increased afterwards).",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Interactive graph</span>"
    ]
  }
]